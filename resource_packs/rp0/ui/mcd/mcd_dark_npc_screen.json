{
  "namespace": "mcd_mcd_dark_npc",

  "close_button_dark_bg": {
    "type": "panel",
    "size": [25, 55],
    "controls": [
      { "close_button@npc_interact.close_button_holder": {} },
      {
        "bg@common.screen_background": {
          //"$screen_background_alpha": 0.9
          "$screen_background_alpha": 0
        }
      }
    ]
  },

  "safezone_bottom_background": {
    "type": "panel",
    "anchor_to": "bottom_middle",
    "anchor_from": "bottom_middle",
    "size": ["150%", "50% + 30px"],
    "offset": [0, "20%"],
    "layer": -5,
    "controls": [
      {
        "header_line": {
          "type": "image",
          "anchor_from": "top_middle",
          "anchor_to": "top_middle",
          "texture": "textures/ui/White",
          "color": [0.5, 0.5, 0.5],
          "alpha": 0.5,
          "size": ["100%", 5]
        }
      },
      {
        "bg@common.screen_background": {
          "$screen_background_alpha": 0.9
        }
      }
    ]
  },

  "screen_content": {
    "type": "panel",
    "controls": [
      {
        "safezone_bottom_bg@mcd_mcd_dark_npc.safezone_bottom_background": {}
      },
      {
        "npc_title": {
          "type": "image",
          "anchor_from": "bottom_left",
          "anchor_to": "bottom_left",
          "offset": ["20% + 5px", "-30% -25px"],
          "size": ["100%c + 20px", "100%c + 10px"],
          "color": [0.2, 0.2, 0.2],
          "texture": "textures/ui/slider_button_default",
          "controls": [
            {
              "npc_name": {
                "type": "label",
                "text": "#title_text",
                "bindings": [{ "binding_name": "#title_text" }]
              }
            }
          ],
          "bindings": [
            { "binding_name": "#title_text" },
            {
              "binding_type": "view",
              "source_property_name": "(#title_text > '')",
              "target_property_name": "#visible"
            }
          ]
        }
      },
      {
        "immersive_reader_button@im_reader.reader_button": {
          "anchor_from": "bottom_left",
          "anchor_to": "bottom_left",
          "offset": [ "20% - 24px", -8 ],
          "size": [ 24, 24],
          "$button_tts_name|default": "key.immersivereader",
          "layer": 5,
          "ignored": "($is_worldbuilder or not $education_edition)",
          "bindings": [
            {
              "binding_name": "#im_reader_button_visible",
              "binding_name_override": "#visible"
            }
          ]
        }
      },

      {
        "npc_model@npc_interact.message_model": {
          "size": ["25%", "100%"],
          "anchor_to": "bottom_left",
          "anchor_from": "bottom_left",
          "offset": ["-15%x", "30%y"]
        }
      },
      {
        "dialog_message_and_buttons": {
          "type": "stack_panel",
          "orientation": "horizontal",
          "anchor_from": "bottom_right",
          "anchor_to": "bottom_right",
          "size": ["80% - 5px", "30% - 15px"],
          "offset": [-5, -35],
          "controls": [
            {
              "dialog_message@common.scrolling_panel": {
                "$show_background": false,
                "size": ["fill", "100% + 30px"],
                "$scrolling_content": "mcd_mcd_dark_npc.mcd_dialog_text_panel",
                "$scroll_size": [5, "100% - 4px"],
                "$scrolling_pane_size": ["100% - 6px", "100%"],
                "$scrolling_pane_offset": [4, 0],
                "$scroll_bar_right_padding_size": [0, 0]
              }
            },
            {
              "student_buttons": {
                "type": "stack_panel",
                "offset": [-5, -5],
                "size": ["30% - 5px", "100%"],
                "max_size": ["30% - 5px", "100%"],
                "$student_button_size": ["100%", "25%"],
                "$focus_override_left": "default_npcp_focus",
                "$focus_override_right": "FOCUS_OVERRIDE_STOP",
                "collection_name": "student_buttons_collection",
                "controls": [
                  {
                    "button_0@npcplus_common.student_button": {
                      "collection_index": 0
                    }
                  },
                  {
                    "button_1@npcplus_common.student_button": {
                      "collection_index": 1
                    }
                  },
                  {
                    "button_2@npcplus_common.student_button": {
                      "collection_index": 2
                    }
                  },
                  {
                    "button_3@npcplus_common.student_button": {
                      "collection_index": 3
                    }
                  },
                  {
                    "button_4@npcplus_common.student_button": {
                      "collection_index": 4
                    }
                  },
                  {
                    "button_5@npcplus_common.student_button": {
                      "collection_index": 5
                    }
                  }
                ],
                "bindings": [
                  {
                    "binding_name": "#student_button_visible",
                    "binding_type": "collection",
                    "binding_name_override": "#visible",
                    "binding_collection_name": "student_buttons_collection"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "close_button@mcd_mcd_dark_npc.close_button_dark_bg": {
          "anchor_from": "bottom_right",
          "anchor_to": "bottom_right",
          "offset": [0, "-30%"],
          "bindings": [
            {
              "binding_name": "(not #gamepad_helper_visible)",
              "binding_name_override": "#visible"
            }
          ]
        }
      },
      {
        "close_helper@npc_interact.close_text": {
          "offset": [-5, "-38%"],
          "anchor_to": "bottom_right",
          "anchor_from": "bottom_right"
        }
      }
    ]
  },

  "mcd_dialog_text_panel": {
    "type": "panel",
    "size": ["100%", "100%c"],
    "controls": [
      {
        "content_focus@npcplus_common.content_focus_panel": {
          "size": [0, 0]
        }
      },
      {
        "dialog_text_stack_panel": {
          "type": "stack_panel",
          "size": ["100%", "100%c"],
          "controls": [
            {
              "dialog_message@npcplus_common.npcp_prefixed_dialog_message": {}
            },
            {
              "mcd_bottom_padding": {
                "type": "panel",
                "size": ["100%", 2]
              }
            }
          ]
        }
      }
    ]
  },

  "mcd_dark_screen@npcplus_common.npcplus_screen_base": {
    "$no_safezone_screen_content": "common.screen_background",
    "$safezone_screen_content": "mcd_mcd_dark_npc.screen_content",
    "$screen_background_alpha": 0.25
  }
}
